///|
test "Power Strike" {
  let stats = @skill.parse_stats!({
    "1": { "damage": 165, "hs": "h1", "mpCon": 4 },
    "2": { "damage": 170, "hs": "h2", "mpCon": 4 },
    "3": { "damage": 175, "hs": "h3", "mpCon": 4 },
    "4": { "damage": 180, "hs": "h4", "mpCon": 4 },
    "5": { "damage": 185, "hs": "h5", "mpCon": 5 },
    "6": { "damage": 190, "hs": "h6", "mpCon": 5 },
    "7": { "damage": 195, "hs": "h7", "mpCon": 5 },
    "8": { "damage": 200, "hs": "h8", "mpCon": 6 },
    "9": { "damage": 205, "hs": "h9", "mpCon": 6 },
    "10": { "damage": 210, "hs": "h10", "mpCon": 7 },
    "11": { "damage": 215, "hs": "h11", "mpCon": 7 },
    "12": { "damage": 220, "hs": "h12", "mpCon": 8 },
    "13": { "damage": 225, "hs": "h13", "mpCon": 8 },
    "14": { "damage": 230, "hs": "h14", "mpCon": 9 },
    "15": { "damage": 235, "hs": "h15", "mpCon": 9 },
    "16": { "damage": 240, "hs": "h16", "mpCon": 10 },
    "17": { "damage": 245, "hs": "h17", "mpCon": 10 },
    "18": { "damage": 250, "hs": "h18", "mpCon": 11 },
    "19": { "damage": 255, "hs": "h19", "mpCon": 11 },
    "20": { "damage": 260, "hs": "h20", "mpCon": 12 },
  })
  let skill = @combat_impl.Skill::new!(
    1001004,
    @resource.NxNode::from_test_value({
      "CharLevel": {
        "10": {
          "effect": {
            "0": {
              "__h": 215,
              "__w": 228,
              "delay": 90,
              "origin": [114, 121],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#180",
            },
            "1": {
              "__h": 207,
              "__w": 223,
              "delay": 150,
              "origin": [112, 117],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#181",
            },
            "2": {
              "__h": 196,
              "__w": 212,
              "delay": 150,
              "origin": [108, 112],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#182",
            },
            "3": {
              "__h": 177,
              "__w": 197,
              "delay": 150,
              "origin": [102, 103],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#183",
            },
            "4": {
              "__h": 113,
              "__w": 144,
              "delay": 150,
              "origin": [92, 70],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#184",
            },
            "5": {
              "__h": 64,
              "__w": 78,
              "delay": 150,
              "origin": [45, 52],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#185",
            },
            "6": {
              "__h": 59,
              "__w": 68,
              "delay": 150,
              "origin": [33, 51],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#186",
            },
            "7": {
              "__h": 51,
              "__w": 64,
              "delay": 150,
              "origin": [32, 46],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#187",
            },
          },
          "hit": {
            "0": {
              "0": {
                "__h": 73,
                "__w": 55,
                "delay": 90,
                "origin": [21, 35],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#175",
              },
              "1": {
                "__h": 146,
                "__w": 110,
                "delay": 150,
                "origin": [43, 79],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#176",
              },
              "2": {
                "__h": 155,
                "__w": 120,
                "delay": 150,
                "origin": [47, 84],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#177",
              },
              "3": {
                "__h": 154,
                "__w": 126,
                "delay": 150,
                "origin": [49, 86],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#178",
              },
              "4": {
                "__h": 146,
                "__w": 122,
                "delay": 150,
                "origin": [49, 78],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#179",
              },
            },
          },
        },
        "15": {
          "effect": {
            "0": {
              "__h": 215,
              "__w": 228,
              "delay": 90,
              "origin": [114, 121],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#193",
            },
            "1": {
              "__h": 207,
              "__w": 223,
              "delay": 90,
              "origin": [112, 117],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#194",
            },
            "2": {
              "__h": 196,
              "__w": 212,
              "delay": 90,
              "origin": [108, 112],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#195",
            },
            "3": {
              "__h": 177,
              "__w": 197,
              "delay": 90,
              "origin": [102, 103],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#196",
            },
            "4": {
              "__h": 113,
              "__w": 144,
              "delay": 90,
              "origin": [92, 70],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#197",
            },
            "5": {
              "__h": 64,
              "__w": 78,
              "delay": 90,
              "origin": [45, 52],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#198",
            },
            "6": {
              "__h": 59,
              "__w": 68,
              "delay": 90,
              "origin": [33, 51],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#199",
            },
            "7": {
              "__h": 51,
              "__w": 64,
              "delay": 90,
              "origin": [32, 46],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#200",
            },
          },
          "hit": {
            "0": {
              "0": {
                "__h": 73,
                "__w": 55,
                "delay": 90,
                "origin": [21, 34],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#188",
              },
              "1": {
                "__h": 146,
                "__w": 110,
                "delay": 90,
                "origin": [43, 78],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#189",
              },
              "2": {
                "__h": 155,
                "__w": 120,
                "delay": 90,
                "origin": [47, 83],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#190",
              },
              "3": {
                "__h": 154,
                "__w": 126,
                "delay": 90,
                "origin": [49, 85],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#191",
              },
              "4": {
                "__h": 146,
                "__w": 122,
                "delay": 90,
                "origin": [49, 77],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#192",
              },
            },
          },
        },
        "20": {
          "effect": {
            "0": {
              "__h": 215,
              "__w": 228,
              "delay": 80,
              "origin": [114, 121],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#206",
            },
            "1": {
              "__h": 207,
              "__w": 223,
              "delay": 80,
              "origin": [112, 117],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#207",
            },
            "2": {
              "__h": 196,
              "__w": 212,
              "delay": 80,
              "origin": [108, 112],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#208",
            },
            "3": {
              "__h": 177,
              "__w": 197,
              "delay": 80,
              "origin": [102, 103],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#209",
            },
            "4": {
              "__h": 113,
              "__w": 144,
              "delay": 80,
              "origin": [92, 70],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#210",
            },
            "5": {
              "__h": 64,
              "__w": 78,
              "delay": 80,
              "origin": [45, 52],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#211",
            },
            "6": {
              "__h": 59,
              "__w": 68,
              "delay": 80,
              "origin": [33, 51],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#212",
            },
            "7": {
              "__h": 51,
              "__w": 64,
              "delay": 80,
              "origin": [32, 46],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#213",
            },
          },
          "hit": {
            "0": {
              "0": {
                "__h": 73,
                "__w": 55,
                "delay": 90,
                "origin": [21, 37],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#201",
              },
              "1": {
                "__h": 146,
                "__w": 110,
                "delay": 90,
                "origin": [43, 81],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#202",
              },
              "2": {
                "__h": 155,
                "__w": 120,
                "delay": 90,
                "origin": [47, 86],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#203",
              },
              "3": {
                "__h": 154,
                "__w": 126,
                "delay": 90,
                "origin": [49, 88],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#204",
              },
              "4": {
                "__h": 146,
                "__w": 122,
                "delay": 90,
                "origin": [49, 80],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#205",
              },
            },
          },
        },
        "25": {
          "effect": {
            "0": {
              "__h": 215,
              "__w": 230,
              "delay": 80,
              "origin": [115, 121],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#219",
            },
            "1": {
              "__h": 209,
              "__w": 224,
              "delay": 80,
              "origin": [113, 118],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#220",
            },
            "2": {
              "__h": 197,
              "__w": 214,
              "delay": 80,
              "origin": [109, 112],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#221",
            },
            "3": {
              "__h": 179,
              "__w": 198,
              "delay": 80,
              "origin": [103, 104],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#222",
            },
            "4": {
              "__h": 113,
              "__w": 146,
              "delay": 80,
              "origin": [93, 70],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#223",
            },
            "5": {
              "__h": 67,
              "__w": 79,
              "delay": 80,
              "origin": [45, 54],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#224",
            },
            "6": {
              "__h": 62,
              "__w": 69,
              "delay": 80,
              "origin": [34, 52],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#225",
            },
            "7": {
              "__h": 52,
              "__w": 64,
              "delay": 80,
              "origin": [32, 46],
              "z": 0,
              "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#226",
            },
          },
          "hit": {
            "0": {
              "0": {
                "__h": 77,
                "__w": 61,
                "origin": [24, 36],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#214",
              },
              "1": {
                "__h": 150,
                "__w": 115,
                "origin": [46, 80],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#215",
              },
              "2": {
                "__h": 159,
                "__w": 125,
                "origin": [50, 85],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#216",
              },
              "3": {
                "__h": 158,
                "__w": 131,
                "origin": [52, 87],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#217",
              },
              "4": {
                "__h": 150,
                "__w": 126,
                "origin": [51, 79],
                "z": 0,
                "__i": "spritesheets/Skill/100.img/skill/1001004/CharLevel#218",
              },
            },
          },
        },
      },
      "effect": {
        "0": {
          "__h": 156,
          "__w": 164,
          "delay": 50,
          "origin": [85, 100],
          "z": 0,
          "__i": "spritesheets/Skill/100.img/skill/1001004/effect#169",
        },
        "1": {
          "__h": 151,
          "__w": 164,
          "delay": 50,
          "origin": [85, 97],
          "z": 0,
          "__i": "spritesheets/Skill/100.img/skill/1001004/effect#170",
        },
        "2": {
          "__h": 144,
          "__w": 162,
          "delay": 50,
          "origin": [85, 94],
          "z": 0,
          "__i": "spritesheets/Skill/100.img/skill/1001004/effect#171",
        },
        "3": {
          "__h": 134,
          "__w": 143,
          "delay": 50,
          "origin": [70, 90],
          "z": 0,
          "__i": "spritesheets/Skill/100.img/skill/1001004/effect#172",
        },
        "4": {
          "__h": 103,
          "__w": 118,
          "delay": 50,
          "origin": [56, 73],
          "z": 0,
          "__i": "spritesheets/Skill/100.img/skill/1001004/effect#173",
        },
        "5": {
          "__h": 74,
          "__w": 73,
          "a0": 255,
          "a1": 0,
          "delay": 50,
          "origin": [39, 57],
          "z": 0,
          "__i": "spritesheets/Skill/100.img/skill/1001004/effect#174",
        },
      },
      "finalAttack": {
        "1100002": { "0": 30, "1": 40 },
        "1100003": { "0": 31, "1": 41 },
        "1200002": { "0": 30, "1": 40 },
        "1200003": { "0": 32, "1": 42 },
        "1300002": { "0": 43 },
        "1300003": { "0": 44 },
      },
      "hit": {
        "0": {
          "0": {
            "__h": 74,
            "__w": 69,
            "delay": 90,
            "origin": [34, 37],
            "z": 0,
            "__i": "spritesheets/Skill/100.img/skill/1001004/hit#167",
          },
          "1": {
            "__h": 118,
            "__w": 103,
            "delay": 90,
            "origin": [75, 58],
            "z": 0,
            "__i": "spritesheets/Skill/100.img/skill/1001004/hit#168",
          },
        },
      },
      "icon": {
        "__h": 32,
        "__w": 32,
        "origin": [0, 32],
        "z": 0,
        "__i": "images/Skill/164.png",
      },
      "iconDisabled": {
        "__h": 32,
        "__w": 32,
        "origin": [0, 32],
        "z": 0,
        "__i": "images/Skill/166.png",
      },
      "iconMouseOver": {
        "__h": 32,
        "__w": 32,
        "origin": [0, 32],
        "z": 0,
        "__i": "images/Skill/165.png",
      },
      "level": {
        "1": { "damage": 165, "hs": "h1", "mpCon": 4 },
        "2": { "damage": 170, "hs": "h2", "mpCon": 4 },
        "3": { "damage": 175, "hs": "h3", "mpCon": 4 },
        "4": { "damage": 180, "hs": "h4", "mpCon": 4 },
        "5": { "damage": 185, "hs": "h5", "mpCon": 5 },
        "6": { "damage": 190, "hs": "h6", "mpCon": 5 },
        "7": { "damage": 195, "hs": "h7", "mpCon": 5 },
        "8": { "damage": 200, "hs": "h8", "mpCon": 6 },
        "9": { "damage": 205, "hs": "h9", "mpCon": 6 },
        "10": { "damage": 210, "hs": "h10", "mpCon": 7 },
        "11": { "damage": 215, "hs": "h11", "mpCon": 7 },
        "12": { "damage": 220, "hs": "h12", "mpCon": 8 },
        "13": { "damage": 225, "hs": "h13", "mpCon": 8 },
        "14": { "damage": 230, "hs": "h14", "mpCon": 9 },
        "15": { "damage": 235, "hs": "h15", "mpCon": 9 },
        "16": { "damage": 240, "hs": "h16", "mpCon": 10 },
        "17": { "damage": 245, "hs": "h17", "mpCon": 10 },
        "18": { "damage": 250, "hs": "h18", "mpCon": 11 },
        "19": { "damage": 255, "hs": "h19", "mpCon": 11 },
        "20": { "damage": 260, "hs": "h20", "mpCon": 12 },
      },
    }),
    true,
    20,
    stats,
    @weapon.Type::NONE,
    fn(_) {  },
    fn(_, _) {  },
  )
  let character = @character.Character::new(
    1234567890,
    @char_look.CharLook::new(
      @char_look.LookEntry::default(),
      @char_look.Body::default(),
      @char_look.Hair::default(),
      @char_look.Face::default(),
      @types.BodyDrawInfo::default(),
    ),
    "kkkiio",
    @ui.NumberSet::default(),
    get_skilllevel=fn(_skill_id) { 1 },
    @char_stats.CharStats::new(
      @char_stats.StatsEntry::default(),
      fn() { @weapon.Type::SWORD_1H },
      @job.Job::new(
        100, // Swordsman
        @job.Level::FIRST,
        Map::new(),
      ),
      Map::new(),
      Map::new(),
    ),
    get_integer_attackspeed=fn() { 1 },
  )
  skill.apply_useeffects(character)
  skill.apply_actions(character, @combat.AttackType::CLOSE)
  // ["swordOS.img", "1", "stabO1"]
  character.set_afterimage(skill.get_id())
  let attack = skill.make_attack(character, 0, @combat.AttackType::CLOSE)
  @json.inspect!(attack, content={
    "t": { "$tag": "CLOSE" },
    "damagetype": { "$tag": "DMG_WEAPON", "0": 1.65, "1": 1.65 },
    "critical": 0.05,
    "ignoredef": 0,
    "accuracy": 0,
    "playerlevel": 0,
    "hitcount": 1,
    "mobcount": 1,
    "speed": 1,
    "stance": 0,
    "skill": 1001004,
    "bullet": 0,
    "origin": [0, 0],
    "range": { "lt": [0, 0], "rb": [0, 0] },
    "hrange": 1,
    "toleft": true,
  })
}
