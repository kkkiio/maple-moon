///|
test "parse Background" {
  let spec : BackgroundSpec = @json.from_json!({
    "a": 255,
    "ani": 0,
    "bS": "",
    "cx": 0,
    "cy": 0,
    "front": 0,
    "no": 0,
    "rx": 0,
    "ry": 0,
    "type": 0,
    "x": 0,
    "y": 0,
  })
  @json.inspect!(spec, content={
    "a": 255,
    "ani": false,
    "bS": "",
    "cx": 0,
    "cy": 0,
    "f": false,
    "front": false,
    "no": 0,
    "rx": 0,
    "ry": 0,
    "type_": { "$tag": "BG_NORMAL" },
    "x": 0,
    "y": 0,
  })
}

///|
test "parse background resource" {
  let spec : BackgroundsResource = @json.from_json!({
    "0": {
      "a": 255,
      "ani": 0,
      "bS": "grassySoil",
      "cx": 0,
      "cy": 0,
      "f": 0,
      "front": 0,
      "no": 0,
      "rx": 0,
      "ry": 0,
      "type": 3,
      "x": 0,
      "y": 0,
    },
    "1": {
      "a": 255,
      "ani": 0,
      "bS": "grassySoil",
      "cx": 0,
      "cy": 0,
      "f": 0,
      "front": 0,
      "no": 1,
      "rx": -5,
      "ry": -3,
      "type": 4,
      "x": 116,
      "y": -71,
    },
    "2": {
      "a": 255,
      "ani": 0,
      "bS": "grassySoil",
      "cx": 0,
      "cy": 0,
      "f": 0,
      "front": 0,
      "no": 2,
      "rx": -20,
      "ry": 3,
      "type": 0,
      "x": 495,
      "y": 45,
    },
    "3": {
      "a": 255,
      "ani": 0,
      "bS": "grassySoil",
      "cx": 0,
      "cy": 0,
      "f": 0,
      "front": 0,
      "no": 3,
      "rx": -20,
      "ry": 3,
      "type": 0,
      "x": 374,
      "y": -259,
    },
    "4": {
      "a": 255,
      "ani": 0,
      "bS": "grassySoil",
      "cx": 0,
      "cy": 0,
      "f": 0,
      "front": 0,
      "no": 5,
      "rx": -40,
      "ry": -5,
      "type": 0,
      "x": -66,
      "y": 186,
    },
    "5": {
      "a": 255,
      "ani": 0,
      "bS": "grassySoil",
      "cx": 0,
      "cy": 0,
      "f": 0,
      "front": 0,
      "no": 6,
      "rx": -40,
      "ry": -5,
      "type": 0,
      "x": 958,
      "y": 168,
    },
    "6": {
      "a": 255,
      "ani": 0,
      "bS": "grassySoil",
      "cx": 0,
      "cy": 0,
      "f": 0,
      "front": 0,
      "no": 5,
      "rx": -40,
      "ry": -5,
      "type": 0,
      "x": 1982,
      "y": 186,
    },
    "7": {
      "a": 255,
      "ani": 0,
      "bS": "grassySoil",
      "cx": 0,
      "cy": 0,
      "f": 0,
      "front": 0,
      "no": 6,
      "rx": -40,
      "ry": -5,
      "type": 0,
      "x": 3006,
      "y": 168,
    },
  })
  @json.inspect!(spec, content=[
    {
      "a": 255,
      "ani": false,
      "bS": "grassySoil",
      "cx": 0,
      "cy": 0,
      "f": false,
      "front": false,
      "no": 0,
      "rx": 0,
      "ry": 0,
      "type_": { "$tag": "TILED" },
      "x": 0,
      "y": 0,
    },
    {
      "a": 255,
      "ani": false,
      "bS": "grassySoil",
      "cx": 0,
      "cy": 0,
      "f": false,
      "front": false,
      "no": 1,
      "rx": -5,
      "ry": -3,
      "type_": { "$tag": "HMOVEA" },
      "x": 116,
      "y": -71,
    },
    {
      "a": 255,
      "ani": false,
      "bS": "grassySoil",
      "cx": 0,
      "cy": 0,
      "f": false,
      "front": false,
      "no": 2,
      "rx": -20,
      "ry": 3,
      "type_": { "$tag": "BG_NORMAL" },
      "x": 495,
      "y": 45,
    },
    {
      "a": 255,
      "ani": false,
      "bS": "grassySoil",
      "cx": 0,
      "cy": 0,
      "f": false,
      "front": false,
      "no": 3,
      "rx": -20,
      "ry": 3,
      "type_": { "$tag": "BG_NORMAL" },
      "x": 374,
      "y": -259,
    },
    {
      "a": 255,
      "ani": false,
      "bS": "grassySoil",
      "cx": 0,
      "cy": 0,
      "f": false,
      "front": false,
      "no": 5,
      "rx": -40,
      "ry": -5,
      "type_": { "$tag": "BG_NORMAL" },
      "x": -66,
      "y": 186,
    },
    {
      "a": 255,
      "ani": false,
      "bS": "grassySoil",
      "cx": 0,
      "cy": 0,
      "f": false,
      "front": false,
      "no": 6,
      "rx": -40,
      "ry": -5,
      "type_": { "$tag": "BG_NORMAL" },
      "x": 958,
      "y": 168,
    },
    {
      "a": 255,
      "ani": false,
      "bS": "grassySoil",
      "cx": 0,
      "cy": 0,
      "f": false,
      "front": false,
      "no": 5,
      "rx": -40,
      "ry": -5,
      "type_": { "$tag": "BG_NORMAL" },
      "x": 1982,
      "y": 186,
    },
    {
      "a": 255,
      "ani": false,
      "bS": "grassySoil",
      "cx": 0,
      "cy": 0,
      "f": false,
      "front": false,
      "no": 6,
      "rx": -40,
      "ry": -5,
      "type_": { "$tag": "BG_NORMAL" },
      "x": 3006,
      "y": 168,
    },
  ])
}
